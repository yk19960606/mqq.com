!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=function(e){return"number"===typeof e},o={div:"block",ul:"block",li:"block",span:"inline"},a=function(e){return"#"===e.charAt(0)?document.getElementById(e.slice(1)):document.querySelectorAll(e)},i=function(e,t){if(e&&t)return Object.entries(t).forEach(function(t){e.style[t[0]]=r(t[1])?t[1]+"px":t[1]}),!0},u=function(e){if(e){if("none"===window.getComputedStyle(e).display&&(e.style.display=""),["","none"].includes(window.getComputedStyle(e).display)){var t=o[e.tagName.toLowerCase()];if(t)return void(e.style.display=t)}var n=document.body.appendChild(document.createElement(e.nodeName)),r=window.getComputedStyle(n).display;document.body.removeChild(n),e.style.display=r}},f=function(e){e&&(e.style.display="none")},c=function(e){if(e){var t=e.parentNode;return t&&t.removeChild(e),!0}},l=function(e,t,n){(l=e.addEventListener?function(e,t,n){n=n.bind(e),e.addEventListener(t,n,!1)}:function(e,t,n){n=n.bind(e),e.attachEvent("on"+t,n)})(e,t,n)},d=300,v={2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#9c0",1024:"#33b5e5",2048:"#09c",4096:"#a6c",8192:"#93c","-1":"#8cb6c0"};(function(){var e=[],t=[],n=document.documentElement.clientWidth,r=0,o=.92*n,s=.18*n,b=.04*n,p=[{label:"\u8d85",value:2},{label:"\u4eba",value:4},{label:"\u828a",value:8},{label:"\u5341",value:16},{label:"\u516b",value:32},{label:"\u5c81",value:64},{label:"\u751f",value:128},{label:"\u65e5",value:256},{label:"\u5feb",value:512},{label:"\u4e50",value:1024},{label:"\uff01",value:2048}],h=0,m=0,y=0,g=0;!function(){n>500&&(o=500,b=20,s=100);var e=a("#grid-container"),t=a(".grid-cell");i(e,{width:o-2*b,height:o-2*b,padding:b,borderRadius:.02*o}),t.forEach(function(e){i(e,{width:s,height:s})})}(),M(),l(a("#newGamebtn"),"click",M);var k=a("#cover");l(a("#rank"),"click",function(){u(k),u(a("#coverList"))}),l(k,"click",function(){f(k),a(".cover-content").forEach(function(e){f(e)})}),l(document,"keydown",function(e){13===e.keyCode&&"none"!==window.getComputedStyle(k).display&&(f(k),a(".cover-content").forEach(function(e){f(e)}))}),l(document,"keydown",function(e){switch(e.keyCode){case 37:if(B()||!I())return;break;case 38:if(B()||!N())return;break;case 39:if(B()||!H())return;break;case 40:if(B()||!A())return;break;default:return}e.preventDefault(),setTimeout(O,d)});var w=a("#grid-container");function M(){!function(){for(var n=0;n<4;n++)for(var r=0;r<4;r++){var o=a("#grid-cell-"+n+"-"+r);i(o,{top:T(n,r),left:C(n,r)})}for(var u=0;u<4;u++){e[u]=[],t[u]=[];for(var f=0;f<4;f++)e[u][f]=0,t[u][f]=!1}x(),E(0,!1)}(),O(),O()}function T(e,t){return b+e*(b+s)}function C(e,t){return b+t*(b+s)}function x(){var n=a("#grid-container");a(".number-cell").forEach(function(e){return c(e)});for(var r=function(r){for(var o=function(o){var a,u=document.createElement("div");(u.classList.add("number-cell"),u.id="number-cell-".concat(r,"-").concat(o),0===e[r][o])?i(u,{width:0,height:0,top:T(r)+s/2,left:C(0,o)+s/2}):(u.innerText=p.filter(function(t){return t.value===e[r][o]})[0].label,i(u,{width:s,height:s,top:T(r),left:C(0,o),backgroundColor:S(e[r][o]),color:j(e[r][o]),lineHeight:s}),a=e[r][o]<1e3&&e[r][o]>100?.5*s:e[r][o]<1e3?.6*s:e[r][o]>1e3&&e[r][o]<1e4?.4*s:.35*s,i(u,{fontSize:a}));n.appendChild(u),t[r][o]=!1},a=0;a<4;a++)o(a)},o=0;o<4;o++)r(o)}function E(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r=t?r+e:e,a("#score").innerText=r}function S(e){return v[e]?v[e]:v[-1]}function j(e){return e<=4?"#776e65":"#fff"}function O(){if(P(e))return!1;for(var t=parseInt(Math.floor(4*Math.random())),n=parseInt(Math.floor(4*Math.random())),r=0;r<50&&0!==e[t][n];)t=parseInt(Math.floor(4*Math.random())),n=parseInt(Math.floor(4*Math.random())),r++;if(50===r)for(var o=0;o<4;o++)for(var u=0;u<4;u++)0===e[o][u]&&(t=o,n=u);var f=Math.random()>.3?2:4;return e[t][n]=f,function(t,n,r){var o=a("#number-cell-".concat(t,"-").concat(n)),u=["width","height","top","left"].map(function(e){return"".concat(e," 0.05s")}).join(",");i(o,{width:s,height:s,top:T(t),left:C(0,n),color:j(r),fontSize:.6*s,lineHeight:s,backgroundColor:S(r),transition:u}),o.innerText=p.filter(function(r){return r.value===e[t][n]})[0].label,i(o,{transition:""})}(t,n,f),!0}function P(e){for(var t=0;t<4;t++)for(var n=0;n<4;n++)if(0===e[t][n])return!1;return!0}function _(e,t,n,r){var o=a("#number-cell-".concat(e,"-").concat(t)),u=T(e),f=C(0,t),c=T(n),l=C(0,r);i(o,{transform:"translate3d(".concat(l-f,"px, ").concat(c-u,"px, 0px)"),transition:"transform ".concat(d/1e3,"s linear 0s")})}function I(){if(!L(e))return!1;for(var n=0;n<4;n++)for(var r=1;r<4;r++)if(0!==e[n][r])for(var o=0;o<r;o++){if(0===e[n][o]&&Y(n,o,r,e)){_(n,r,n,o),e[n][o]=e[n][r],e[n][r]=0;break}if(e[n][o]===e[n][r]&&Y(n,o,r,e)&&!t[n][o]){_(n,r,n,o),e[n][o]+=e[n][r],e[n][r]=0,t[n][o]=!0,E(e[n][o]);break}}return setTimeout(x,d),!0}function L(e){for(var t=0;t<4;t++)for(var n=1;n<4;n++)if(0!==e[t][n]&&(0===e[t][n-1]||e[t][n-1]===e[t][n]))return!0;return!1}function N(){if(!z(e))return!1;for(var n=1;n<4;n++)for(var r=0;r<4;r++)if(0!==e[n][r])for(var o=0;o<n;o++){if(0===e[o][r]&&q(r,o,n,e)){_(n,r,o,r),e[o][r]=e[n][r],e[n][r]=0;break}if(e[o][r]===e[n][r]&&q(r,o,n,e)&&!t[o][r]){_(n,r,o,r),e[o][r]+=e[n][r],e[n][r]=0,E(e[o][r]),t[o][r]=!0;break}}return setTimeout(x,d),!0}function z(e){for(var t=1;t<4;t++)for(var n=0;n<4;n++)if(0!==e[t][n]&&(0===e[t-1][n]||e[t-1][n]===e[t][n]))return!0;return!1}function A(){if(!D(e))return!1;for(var n=2;n>=0;n--)for(var r=0;r<4;r++)if(0!==e[n][r])for(var o=3;o>n;o--){if(0===e[o][r]&&q(r,n,o,e)){_(n,r,o,r),e[o][r]=e[n][r],e[n][r]=0;break}if(e[o][r]===e[n][r]&&q(r,n,o,e)&&!t[o][r]){_(n,r,o,r),e[o][r]+=e[n][r],e[n][r]=0,E(e[o][r]),t[o][r]=!0;break}}return setTimeout(x,d),!0}function D(e){for(var t=0;t<3;t++)for(var n=0;n<4;n++)if(0!==e[t][n]&&(0===e[t+1][n]||e[t+1][n]===e[t][n]))return!0;return!1}function H(){if(!X(e))return!1;for(var n=0;n<4;n++)for(var r=2;r>=0;r--)if(0!==e[n][r])for(var o=3;o>r;o--){if(0===e[n][o]&&Y(n,r,o,e)){_(n,r,n,o),e[n][o]=e[n][r],e[n][r]=0;break}if(e[n][o]===e[n][r]&&Y(n,r,o,e)&&!t[n][o]){_(n,r,n,o),e[n][o]+=e[n][r],e[n][r]=0,E(e[n][o]),t[n][o]=!0;break}}return setTimeout(x,d),!0}function X(e){for(var t=0;t<4;t++)for(var n=0;n<3;n++)if(0!==e[t][n]&&(0===e[t][n+1]||e[t][n+1]===e[t][n]))return!0;return!1}function Y(e,t,n,r){for(var o=t+1;o<n;o++)if(0!==r[e][o])return!1;return!0}function q(e,t,n,r){for(var o=t+1;o<n;o++)if(0!==r[o][e])return!1;return!0}function B(){return!(!P(e)||!function(e){if(L(e)||X(e)||D(e)||z(e))return!1;return!0}(e))&&(u(k),u(a("#gameOver")),!0)}l(w,"touchstart",function(e){h=e.touches[0].pageX,m=e.touches[0].pageY}),l(w,"touchmove",function(e){e.preventDefault(),e.stopPropagation()}),l(w,"touchend",function(e){y=e.changedTouches[0].pageX,g=e.changedTouches[0].pageY;var t=y-h,r=g-m;Math.abs(t)<.15*n&&Math.abs(r)<.15*n||B()||(Math.abs(t)>=Math.abs(r)?t>0?H()&&setTimeout(O,d):I()&&setTimeout(O,d):r>0?A()&&setTimeout(O,d):N()&&setTimeout(O,d))})})()}]);